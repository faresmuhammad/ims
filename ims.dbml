Project InventoryManagementSystem {
    database_type: 'MySQL'
    note: 'Inventory Management System Database'
}

enum Gender{
  male
  female
}

enum CategoryTarget{
  Customer
  Owner
}

enum OrderStatus{
  Processing
  Shipped
  OnTheWay
  Delivered
}

enum PaymentMethod{
  Cash
  CreditCard
}

Table Users {
  id bigint [pk]
  username string [not null,unique]
  email string [null,unique]
  password string [not null]
  remember_token string
  created_at timestamp
  updated_at timestamp
}
//Roles can be Customer, Admin, Super Admin and Warehouse Worker
Table Roles{
  id bigint [pk]
  name string [not null]
  description text
}

Table user_role_pivot{
  user_id bigint [pk, ref: > Users.id]
  role_id bigint [pk, ref: > Roles.id]
}

Table Categories {
  id bigint [pk, not null, increment]
  parent_id bigint [ref: < Categories.id]
  name string [not null]
  slug string [not null]
  description text
  created_at timestamp
  updated_at timestamp
}


Table Products{
  id bigint [pk]
  code string [unique, not null]
  name string [not null]
  slug string [not null]
  description text
  //price field is the current price
  //So when the price is updated, a price history entry will be added in PriceHistory Table
  price double [default: 0.0]
  category_id bigint [ref: > Categories.id]
  stock_offset int [default: 0]
  created_at timestamp
  updated_at timestamp
}




//Related to IMS System
Table Suppliers{
  id bigint [pk]
  code string [unique]
  name string [not null]
  phone string
}



Table Orders{
  id bigint [pk]
  user_id bigint [ref: > Users.id]
  supplier_id bigint [ref: > Suppliers.id]
  date timestamp
  total_amount double
  payment_method PaymentMethod
  //This discount is overall order discount and it's separated from discount per item
  discount float [default: 0.0]
  is_draft bool [default: true]
}

Table OrderItems{
  id bigint [pk]
  order_id bigint [ref: > Orders.id]
  product_id bigint [ref: - Products.id]
  discount float [default: 0.0]
  price_per_unit double
  quantity int
}

Table Stocks{
  id bigint [pk]
  product_id bigint [ref: > Products.id]
  supplier_id bigint [ref: > Suppliers.id]
  expiration_date date [null]
  original_quantity int
  quantity_in_stock int
  price double
}

Table Notes{
  id bigint [pk]
  content text
  created_at timestamp
  updated_at timestamp
}

Table Shifts{
    id bigint [pk]
    start_date date [not null, note: "Default value is the current date"]
    start_time time [not null, note: "Default value is the current time"]
    end_date date [null, default: null]
    end_time time [null]
    expected_amount double [null]
    real_amount double [null]
    difference double [null]
}
